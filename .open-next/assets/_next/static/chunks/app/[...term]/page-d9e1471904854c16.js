(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{1569:(e,t,r)=>{Promise.resolve().then(r.bind(r,4098)),Promise.resolve().then(r.bind(r,1082))},4098:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(1860),l=r(5944),s=r(7118),i=r(9476),c=r.n(i);function n(e){let{video:t,priority:r,index:l}=e;return(0,a.jsx)("div",{className:"w-full aspect-[4/3]",children:(0,a.jsx)(c(),{href:"/play/".concat(t.id),prefetch:!1,className:"block h-full group bg-light rounded-lg overflow-hidden border-2 border-light hover:ring-4 hover:ring-primary-start hover:ring-offset-4 hover:ring-offset-dark transition-all focus-ring","aria-label":"Video ".concat(l+1,", ").concat(t.title," - Alt plus ").concat(l<9?(l+1).toString():9===l?"0":10===l?"A":11===l?"B":""),children:(0,a.jsxs)("div",{className:"relative h-full flex flex-col",children:[(0,a.jsx)("img",{src:t.thumbnail,alt:t.title,className:"w-full h-2/3 object-cover group-hover:opacity-90 transition-opacity",loading:r?"eager":"lazy","aria-hidden":"true"}),(0,a.jsx)("div",{className:"flex-1 p-4 sm:pt-2 bg-light",children:(0,a.jsx)("h2",{className:"text-dark text-xl sm:text-xl lg:text-base xl:text-xl font-bold line-clamp-2 text-center group-hover:text-primary-end group-focus:text-primary-end transition-colors",children:t.title})})]})})})}var o=r(5449);function u(e){let{searchTerm:t}=e,[r,i]=(0,l.useState)([]),[c,u]=(0,l.useState)(!0),[d,h]=(0,l.useState)(null),[f,p]=(0,l.useState)(""),m=(0,o.useRouter)(),v=(0,l.useCallback)(e=>{r.length>e&&m.push("/play/".concat(r[e].id))},[r,m]);return((0,l.useEffect)(()=>{let e=e=>{if(e.altKey){let t=e.key.toLowerCase();t>="1"&&t<="9"?(v(parseInt(t)-1),e.preventDefault()):"0"===t?(v(9),e.preventDefault()):"a"===t?(v(10),e.preventDefault()):"b"===t&&(v(11),e.preventDefault())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[v]),(0,l.useEffect)(()=>{let e=s.A.get("videoResults"),r=s.A.get("searchTerm");if(e&&r===t)try{let t=JSON.parse(e).map(e=>({...e,thumbnail:"https://i.ytimg.com/vi/".concat(e.id,"/hqdefault.jpg"),link:"https://youtu.be/".concat(e.id)}));i(t),u(!1),p("cache");return}catch(e){console.error("Error parsing cached results:",e)}(async()=>{u(!0),h(null),p("api"),console.log("fetching data","/api/search?term=".concat(encodeURIComponent(t)));try{let e=await fetch("/api/search?term=".concat(encodeURIComponent(t)),{cache:"default"});if(!e.ok)throw Error("Failed to fetch");let r=await e.json(),a=(null==r?void 0:r.videos)||[];i(a),s.A.set("searchTerm",t);let l=a.map(e=>({id:e.id,title:e.title}));s.A.set("videoResults",JSON.stringify(l))}catch(e){console.error("Search failed:",e),h(e)}finally{u(!1)}})()},[t]),c)?(0,a.jsx)("div",{className:"text-center py-8 text-light/70",children:"Loading search results..."}):d?(0,a.jsx)("div",{role:"alert",className:"text-center text-red-500 p-4",children:"Failed to load results. Please try again later."}):(0,a.jsxs)("section",{"aria-labelledby":"search-results-heading",className:"mt-6",children:[(0,a.jsxs)("h1",{id:"search-results-heading",className:"text-2xl font-bold text-light/90 text-center mb-6",children:['Results for "',t,'"']}),0===r.length?(0,a.jsx)("p",{className:"text-center text-light/70",children:"No results found"}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",role:"list","aria-label":"Search results",children:r.slice(0,12).map((e,t)=>(0,a.jsx)("article",{role:"listitem","aria-label":"Video ".concat(t+1,", ").concat(e.title," - press Alt plus ").concat(t<9?t+1:9===t?"0":10===t?"A":"B"," to play"),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n,{video:e,priority:t<4,index:t}),(0,a.jsxs)("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-sm hidden sm:block","aria-hidden":"true",children:["Alt+",t<9?t+1:9===t?"0":10===t?"A":"B"]})]})},e.id))})]})}},1082:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(1860),l=r(5944),s=r(5449),i=r(7963),c=r.n(i);function n(){let e=function(e){let[t,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let a=window.matchMedia(e);a.matches!==t&&r(a.matches);let l=()=>r(a.matches);return a.addEventListener("change",l),()=>a.removeEventListener("change",l)},[t,e]),t}("(max-width: 639px)"),[t,r]=(0,l.useState)(""),[i,n]=(0,l.useState)(""),[o,u]=(0,l.useState)(!1),d=(0,s.useRouter)(),h=(0,l.useRef)(null),f=(0,s.usePathname)();(0,l.useRef)(!1);let[p,m]=(0,l.useTransition)();(0,l.useEffect)(()=>{let t=setTimeout(()=>{if(!e&&h.current){var t;null===(t=h.current)||void 0===t||t.focus()}},200);return()=>clearTimeout(t)},[e]);let v=(0,l.useRef)(null),x=(0,l.useCallback)(c()(e=>{r(e)},300),[]);(0,l.useEffect)(()=>(v.current=x,()=>{var e;null===(e=v.current)||void 0===e||e.cancel()}),[x]),(0,l.useEffect)(()=>{if("/"===f){var e;null===(e=v.current)||void 0===e||e.cancel(),r(""),h.current&&(h.current.value="")}},[f]);let g=async e=>{var a,l,s;if(e.preventDefault(),null===(a=v.current)||void 0===a||a.cancel(),!t.trim()){d.push("/");return}let i=t.trim().toLowerCase().replace(/ /g,"+");try{let e=await fetch("/api/check-bad-words?term=".concat(i)),{hasBadWords:t}=await e.json();if(t){null===(l=v.current)||void 0===l||l.cancel(),r(""),h.current&&(h.current.value=""),d.push("/");return}d.push("/".concat(i))}catch(e){null===(s=v.current)||void 0===s||s.cancel(),r(""),d.push("/")}};return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("form",{onSubmit:g,role:"search","aria-label":"Search for YouTube videos",className:"relative",method:"GET",action:"/".concat(t.trim().toLowerCase().replace(/ /g,"+")),children:[(0,a.jsxs)("div",{className:"grid-clickable-group",children:[(0,a.jsx)("input",{ref:h,type:"search",name:"v",value:t,onChange:e=>{n("");let t=e.target.value;r(t),x(t)},placeholder:"type here...",className:"input-primary text-2xl h-16","aria-label":"Type here to search for YouTube videos","aria-invalid":!!i,"aria-describedby":i?"search-error":void 0,disabled:o,autoComplete:"off",role:"searchbox"}),(0,a.jsx)("button",{type:"submit",className:"absolute right-2 top-2 btn-primary h-12 w-24","aria-label":o?"Please wait, searching...":"Search for videos",disabled:o,role:"button",children:o?"Searching...":"Search"})]}),i&&(0,a.jsx)("div",{id:"search-error",role:"alert",className:"absolute top-full left-0 mt-2 text-primary-start","aria-live":"assertive",children:i}),(0,a.jsx)("div",{"aria-live":"polite",className:"sr-only",role:"status",children:o?"Searching for videos, please wait...":""})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[671,341,330,358],()=>t(1569)),_N_E=e.O()}]);